name: 'Pull Docker Image from ACR'
description: 'Login to Azure ACR and pull a nightly image'
inputs:
  image_tag:
    description: 'Local image tag (e.g., nightly-vllm-amd64)'
    required: true
  azure_acr_hostname:
    description: 'Azure ACR hostname'
    required: true
  azure_acr_user:
    description: 'Azure ACR username'
    required: true
  azure_acr_password:
    description: 'Azure ACR password'
    required: true

runs:
  using: "composite"
  steps:
    - name: Login to Azure ACR
      shell: bash
      run: |
        echo "${{ inputs.azure_acr_password }}" | docker login ${{ inputs.azure_acr_hostname }} --username ${{ inputs.azure_acr_user }} --password-stdin
    - name: Pull and tag image
      shell: bash
      run: |
        docker pull ${{ inputs.azure_acr_hostname }}/ai-dynamo/dynamo:${{ inputs.image_tag }}
        docker tag ${{ inputs.azure_acr_hostname }}/ai-dynamo/dynamo:${{ inputs.image_tag }} ${{ inputs.image_tag }}

