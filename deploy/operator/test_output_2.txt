=== RUN   TestDynamoComponentDeploymentReconciler_generateLeaderWorkerSet
=== RUN   TestDynamoComponentDeploymentReconciler_generateLeaderWorkerSet/nil_instanceID_-_success_(native_scaling)
    dynamocomponentdeployment_controller_test.go:1289: Mismatch (-expected +actual):
          &v1.LeaderWorkerSet{
          	TypeMeta:   {},
          	ObjectMeta: {Name: "test-lws-nil-id", Namespace: "default", Labels: {"instance-id": "0"}},
          	Spec: v1.LeaderWorkerSetSpec{
          		Replicas: &1,
          		LeaderWorkerTemplate: v1.LeaderWorkerTemplate{
          			LeaderTemplate: &{ObjectMeta: {Labels: {"instance-id": "0", "nvidia.com/dynamo-graph-deployment-name": "", "nvidia.com/metrics-enabled": "true", "role": "leader"}, Annotations: {"scheduling.k8s.io/group-name": "test-lws-nil-id"}}, Spec: {Volumes: {{Name: "shared-memory", VolumeSource: {EmptyDir: &{Medium: "Memory", SizeLimit: &{i: {...}, Format: "BinarySI"}}}}}, Containers: {{Name: "main", Image: "test-image:latest", Command: {"some", "command"}, Args: {"arg"}, ...}}, RestartPolicy: "Always", TerminationGracePeriodSeconds: &60, ...}},
          			WorkerTemplate: v1.PodTemplateSpec{
          				ObjectMeta: {Labels: {"instance-id": "0", "nvidia.com/dynamo-graph-deployment-name": "", "nvidia.com/metrics-enabled": "true", "role": "worker"}, Annotations: {"scheduling.k8s.io/group-name": "test-lws-nil-id"}},
          				Spec: v1.PodSpec{
          					Volumes:        {{Name: "shared-memory", VolumeSource: {EmptyDir: &{Medium: "Memory", SizeLimit: &{i: {...}, Format: "BinarySI"}}}}},
          					InitContainers: nil,
          					Containers: []v1.Container{
          						{
          							Name:  "main",
          							Image: "test-image:latest",
          							Command: []string{
        - 								"/bin/sh",
        + 								"some",
        - 								"-c",
        + 								"command",
          							},
        - 							Args:       []string{"ray start --address=$LWS_LEADER_ADDRESS:6379 --block"},
        + 							Args:       []string{"arg"},
          							WorkingDir: "",
          							Ports:      nil,
          							... // 18 identical fields
          						},
          					},
          					EphemeralContainers: nil,
          					RestartPolicy:       "Always",
          					... // 35 identical fields
          				},
          			},
          			Size:           &2,
          			RestartPolicy:  "",
          			SubGroupPolicy: nil,
          		},
          		RolloutStrategy: {},
          		StartupPolicy:   "LeaderCreated",
          		NetworkConfig:   nil,
          	},
          	Status: {},
          }
    dynamocomponentdeployment_controller_test.go:1292: 
        Expected
            <*v1.LeaderWorkerSet | 0x140003da508>: {
                TypeMeta: {Kind: "", APIVersion: ""},
                ObjectMeta: {
                    Name: "test-lws-nil-id",
                    GenerateName: "",
                    Namespace: "default",
                    SelfLink: "",
                    UID: "",
                    ResourceVersion: "",
                    Generation: 0,
                    CreationTimestamp: {
                        Time: 0001-01-01T00:00:00Z,
                    },
                    DeletionTimestamp: nil,
                    DeletionGracePeriodSeconds: nil,
                    Labels: {"instance-id": "0"},
                    Annotations: nil,
                    OwnerReferences: nil,
                    Finalizers: nil,
                    ManagedFields: nil,
                },
                Spec: {
                    Replicas: 1,
                    LeaderWorkerTemplate: {
                        LeaderTemplate: {
                            ObjectMeta: {
                                Name: "",
                                GenerateName: "",
                                Namespace: "",
                                SelfLink: "",
                                UID: "",
                                ResourceVersion: "",
                                Generation: 0,
                                CreationTimestamp: {
                                    Time: 0001-01-01T00:00:00Z,
                                },
                                DeletionTimestamp: nil,
                                DeletionGracePeriodSeconds: nil,
                                Labels: {
                                    "nvidia.com/dynamo-graph-deployment-name": "",
                                    "instance-id": "0",
                                    "role": "leader",
                                    "nvidia.com/metrics-enabled": "true",
                                },
                                Annotations: {
                                    "scheduling.k8s.io/group-name": "test-lws-nil-id",
                                },
                                OwnerReferences: nil,
                                Finalizers: nil,
                                ManagedFields: nil,
                            },
                            Spec: {
                                Volumes: [
                                    {
                                        Name: "shared-memory",
                                        VolumeSource: {
                                            HostPath: nil,
                                            EmptyDir: {
                                                Medium: "Memory",
                                                SizeLimit: {i: ..., d: ..., s: ..., Format: ...},
                                            },
                                            GCEPersistentDisk: nil,
                                            AWSElasticBlockStore: nil,
                                            GitRepo: nil,
                                            Secret: nil,
                                            NFS: nil,
                                            ISCSI: nil,
                                            Glusterfs: nil,
                                            PersistentVolumeClaim: nil,
                                            RBD: nil,
                                            FlexVolume: nil,
                                            Cinder: nil,
                                            CephFS: nil,
                                            Flocker: nil,
                                            DownwardAPI: nil,
                                            FC: nil,
                                            AzureFile: nil,
                                            ConfigMap: nil,
                                            VsphereVolume: nil,
                                            Quobyte: nil,
                                            AzureDisk: nil,
                                            PhotonPersistentDisk: nil,
                                            Projected: nil,
                                            PortworxVolume: nil,
                                            ScaleIO: nil,
                                            StorageOS: nil,
                                            CSI: nil,
                                            Ephemeral: nil,
                                            Image: nil,
                                        },
                                    },
                                ],
                                InitContainers: nil,
                                Containers: [
                                    {
                                        Name: "main",
                                        Image: "test-image:latest",
                                        Command: ["some", "command"],
                                        Args: ["arg"],
                                        WorkingDir: "",
                                        Ports: nil,
                                        EnvFrom: nil,
                                        Env: [
                                            {
                                                Name: "DYN_COMPONENT",
                                                Value: "",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_DISCOVERY_BACKEND",
                                                Value: "kubernetes",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_NAMESPACE",
                                                Value: "default-",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_PARENT_DGD_K8S_NAME",
                                                Value: "",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_PARENT_DGD_K8S_NAMESPACE",
                                                Value: "default",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "POD_NAME",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                            {
                                                Name: "POD_NAMESPACE",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                            {
                                                Name: "POD_UID",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                        ],
                                        Resources: {
                                            Limits: {
                                                "nvidia.com/gpu": {i: ..., d: ..., s: ..., Format: ...},
                                            },
                                            Requests: nil,
                                            Claims: nil,
                                        },
                                        ResizePolicy: nil,
                                        RestartPolicy: nil,
                                        VolumeMounts: [
                                            {
                                                Name: "shared-memory",
                                                ReadOnly: false,
                                                RecursiveReadOnly: nil,
                                                MountPath: "/dev/shm",
                                                SubPath: "",
                                                MountPropagation: nil,
                                                SubPathExpr: "",
                                            },
                                        ],
                                        VolumeDevices: nil,
                                        LivenessProbe: nil,
                                        ReadinessProbe: nil,
                                        StartupProbe: nil,
                                        Lifecycle: nil,
                                        TerminationMessagePath: "",
                                        TerminationMessagePolicy: "",
                                        ImagePullPolicy: "",
                                        SecurityContext: nil,
                                        Stdin: false,
                                        StdinOnce: false,
                                        TTY: false,
                                    },
                                ],
                                EphemeralContainers: nil,
                                RestartPolicy: "Always",
                                TerminationGracePeriodSeconds: 60,
                                ActiveDeadlineSeconds: nil,
                                DNSPolicy: "",
                                NodeSelector: nil,
                                ServiceAccountName: "default-test-sa",
                                DeprecatedServiceAccount: "",
                                AutomountServiceAccountToken: nil,
                                NodeName: "",
                                HostNetwork: false,
                                HostPID: false,
                                HostIPC: false,
                                ShareProcessNamespace: nil,
                                SecurityContext: {
                                    SELinuxOptions: nil,
                                    WindowsOptions: nil,
                                    RunAsUser: nil,
                                    RunAsGroup: nil,
                                    RunAsNonRoot: nil,
                                    SupplementalGroups: nil,
                                    SupplementalGroupsPolicy: nil,
                                    FSGroup: 1000,
                                    Sysctls: nil,
                                    FSGroupChangePolicy: nil,
                                    SeccompProfile: nil,
                                    AppArmorProfile: nil,
                                    SELinuxChangePolicy: nil,
                                },
                                ImagePullSecrets: nil,
                                Hostname: "",
                                Subdomain: "",
                                Affinity: nil,
                                SchedulerName: "volcano",
                                Tolerations: nil,
                                HostAliases: nil,
                                PriorityClassName: "",
                                Priority: nil,
                                DNSConfig: nil,
                                ReadinessGates: nil,
                                RuntimeClassName: nil,
                                EnableServiceLinks: nil,
                                PreemptionPolicy: nil,
                                Overhead: nil,
                                TopologySpreadConstraints: nil,
                                SetHostnameAsFQDN: nil,
                                OS: nil,
                                HostUsers: nil,
                                SchedulingGates: nil,
                                ResourceClaims: nil,
                                Resources: nil,
                            },
                        },
                        WorkerTemplate: {
                            ObjectMeta: {
                                Name: "",
                                GenerateName: "",
                                Namespace: "",
                                SelfLink: "",
                                UID: "",
                                ResourceVersion: "",
                                Generation: 0,
                                CreationTimestamp: {
                                    Time: 0001-01-01T00:00:00Z,
                                },
                                DeletionTimestamp: nil,
                                DeletionGracePeriodSeconds: nil,
                                Labels: {
                                    "instance-id": "0",
                                    "role": "worker",
                                    "nvidia.com/metrics-enabled": "true",
                                    "nvidia.com/dynamo-graph-deployment-name": "",
                                },
                                Annotations: {
                                    "scheduling.k8s.io/group-name": "test-lws-nil-id",
                                },
                                OwnerReferences: nil,
                                Finalizers: nil,
                                ManagedFields: nil,
                            },
                            Spec: {
                                Volumes: [
                                    {
                                        Name: "shared-memory",
                                        VolumeSource: {
                                            HostPath: nil,
                                            EmptyDir: {
                                                Medium: "Memory",
                                                SizeLimit: {i: ..., d: ..., s: ..., Format: ...},
                                            },
                                            GCEPersistentDisk: nil,
                                            AWSElasticBlockStore: nil,
                                            GitRepo: nil,
                                            Secret: nil,
                                            NFS: nil,
                                            ISCSI: nil,
                                            Glusterfs: nil,
                                            PersistentVolumeClaim: nil,
                                            RBD: nil,
                                            FlexVolume: nil,
                                            Cinder: nil,
                                            CephFS: nil,
                                            Flocker: nil,
                                            DownwardAPI: nil,
                                            FC: nil,
                                            AzureFile: nil,
                                            ConfigMap: nil,
                                            VsphereVolume: nil,
                                            Quobyte: nil,
                                            AzureDisk: nil,
                                            PhotonPersistentDisk: nil,
                                            Projected: nil,
                                            PortworxVolume: nil,
                                            ScaleIO: nil,
                                            StorageOS: nil,
                                            CSI: nil,
                                            Ephemeral: nil,
                                            Image: nil,
                                        },
                                    },
                                ],
                                InitContainers: nil,
                                Containers: [
                                    {
                                        Name: "main",
                                        Image: "test-image:latest",
                                        Command: ["some", "command"],
                                        Args: ["arg"],
                                        WorkingDir: "",
                                        Ports: nil,
                                        EnvFrom: nil,
                                        Env: [
                                            {
                                                Name: "DYN_COMPONENT",
                                                Value: "",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_DISCOVERY_BACKEND",
                                                Value: "kubernetes",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_NAMESPACE",
                                                Value: "default-",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_PARENT_DGD_K8S_NAME",
                                                Value: "",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_PARENT_DGD_K8S_NAMESPACE",
                                                Value: "default",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "POD_NAME",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                            {
                                                Name: "POD_NAMESPACE",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                            {
                                                Name: "POD_UID",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                        ],
                                        Resources: {
                                            Limits: {
                                                "nvidia.com/gpu": {i: ..., d: ..., s: ..., Format: ...},
                                            },
                                            Requests: nil,
                                            Claims: nil,
                                        },
                                        ResizePolicy: nil,
                                        RestartPolicy: nil,
                                        VolumeMounts: [
                                            {
                                                Name: "shared-memory",
                                                ReadOnly: false,
                                                RecursiveReadOnly: nil,
                                                MountPath: "/dev/shm",
                                                SubPath: "",
                                                MountPropagation: nil,
                                                SubPathExpr: "",
                                            },
                                        ],
                                        VolumeDevices: nil,
                                        LivenessProbe: nil,
                                        ReadinessProbe: nil,
                                        StartupProbe: nil,
                                        Lifecycle: nil,
                                        TerminationMessagePath: "",
                                        TerminationMessagePolicy: "",
                                        ImagePullPolicy: "",
                                        SecurityContext: nil,
                                        Stdin: false,
                                        StdinOnce: false,
                                        TTY: false,
                                    },
                                ],
                                EphemeralContainers: nil,
                                RestartPolicy: "Always",
                                TerminationGracePeriodSeconds: 60,
                                ActiveDeadlineSeconds: nil,
                                DNSPolicy: "",
                                NodeSelector: nil,
                                ServiceAccountName: "default-test-sa",
                                DeprecatedServiceAccount: "",
                                AutomountServiceAccountToken: nil,
                                NodeName: "",
                                HostNetwork: false,
                                HostPID: false,
                                HostIPC: false,
                                ShareProcessNamespace: nil,
                                SecurityContext: {
                                    SELinuxOptions: nil,
                                    WindowsOptions: nil,
                                    RunAsUser: nil,
                                    RunAsGroup: nil,
                                    RunAsNonRoot: nil,
                                    SupplementalGroups: nil,
                                    SupplementalGroupsPolicy: nil,
                                    FSGroup: 1000,
                                    Sysctls: nil,
                                    FSGroupChangePolicy: nil,
                                    SeccompProfile: nil,
                                    AppArmorProfile: nil,
                                    SELinuxChangePolicy: nil,
                                },
                                ImagePullSecrets: nil,
                                Hostname: "",
                                Subdomain: "",
                                Affinity: nil,
                                SchedulerName: "volcano",
                                Tolerations: nil,
                                HostAliases: nil,
                                PriorityClassName: "",
                                Priority: nil,
                                DNSConfig: nil,
                                ReadinessGates: nil,
                                RuntimeClassName: nil,
                                EnableServiceLinks: nil,
                                PreemptionPolicy: nil,
                                Overhead: nil,
                                TopologySpreadConstraints: nil,
                                SetHostnameAsFQDN: nil,
                                OS: nil,
                                HostUsers: nil,
                                SchedulingGates: nil,
                                ResourceClaims: nil,
                                Resources: nil,
                            },
                        },
                        Size: 2,
                        RestartPolicy: "",
                        SubGroupPolicy: nil,
                    },
                    RolloutStrategy: {
                        Type: "",
                        RollingUpdateConfiguration: nil,
                    },
                    StartupPolicy: "LeaderCreated",
                    NetworkConfig: nil,
                },
                Status: {Conditions: nil, ReadyReplicas: 0, UpdatedReplicas: 0, Replicas: 0, HPAPodSelector: ""},
            }
        to be equivalent to
            <*v1.LeaderWorkerSet | 0x14000253908>: {
                TypeMeta: {Kind: "", APIVersion: ""},
                ObjectMeta: {
                    Name: "test-lws-nil-id",
                    GenerateName: "",
                    Namespace: "default",
                    SelfLink: "",
                    UID: "",
                    ResourceVersion: "",
                    Generation: 0,
                    CreationTimestamp: {
                        Time: 0001-01-01T00:00:00Z,
                    },
                    DeletionTimestamp: nil,
                    DeletionGracePeriodSeconds: nil,
                    Labels: {"instance-id": "0"},
                    Annotations: nil,
                    OwnerReferences: nil,
                    Finalizers: nil,
                    ManagedFields: nil,
                },
                Spec: {
                    Replicas: 1,
                    LeaderWorkerTemplate: {
                        LeaderTemplate: {
                            ObjectMeta: {
                                Name: "",
                                GenerateName: "",
                                Namespace: "",
                                SelfLink: "",
                                UID: "",
                                ResourceVersion: "",
                                Generation: 0,
                                CreationTimestamp: {
                                    Time: 0001-01-01T00:00:00Z,
                                },
                                DeletionTimestamp: nil,
                                DeletionGracePeriodSeconds: nil,
                                Labels: {
                                    "instance-id": "0",
                                    "nvidia.com/metrics-enabled": "true",
                                    "role": "leader",
                                    "nvidia.com/dynamo-graph-deployment-name": "",
                                },
                                Annotations: {
                                    "scheduling.k8s.io/group-name": "test-lws-nil-id",
                                },
                                OwnerReferences: nil,
                                Finalizers: nil,
                                ManagedFields: nil,
                            },
                            Spec: {
                                Volumes: [
                                    {
                                        Name: "shared-memory",
                                        VolumeSource: {
                                            HostPath: nil,
                                            EmptyDir: {
                                                Medium: "Memory",
                                                SizeLimit: {i: ..., d: ..., s: ..., Format: ...},
                                            },
                                            GCEPersistentDisk: nil,
                                            AWSElasticBlockStore: nil,
                                            GitRepo: nil,
                                            Secret: nil,
                                            NFS: nil,
                                            ISCSI: nil,
                                            Glusterfs: nil,
                                            PersistentVolumeClaim: nil,
                                            RBD: nil,
                                            FlexVolume: nil,
                                            Cinder: nil,
                                            CephFS: nil,
                                            Flocker: nil,
                                            DownwardAPI: nil,
                                            FC: nil,
                                            AzureFile: nil,
                                            ConfigMap: nil,
                                            VsphereVolume: nil,
                                            Quobyte: nil,
                                            AzureDisk: nil,
                                            PhotonPersistentDisk: nil,
                                            Projected: nil,
                                            PortworxVolume: nil,
                                            ScaleIO: nil,
                                            StorageOS: nil,
                                            CSI: nil,
                                            Ephemeral: nil,
                                            Image: nil,
                                        },
                                    },
                                ],
                                InitContainers: nil,
                                Containers: [
                                    {
                                        Name: "main",
                                        Image: "test-image:latest",
                                        Command: ["some", "command"],
                                        Args: ["arg"],
                                        WorkingDir: "",
                                        Ports: nil,
                                        EnvFrom: nil,
                                        Env: [
                                            {
                                                Name: "DYN_COMPONENT",
                                                Value: "",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_DISCOVERY_BACKEND",
                                                Value: "kubernetes",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_NAMESPACE",
                                                Value: "default-",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_PARENT_DGD_K8S_NAME",
                                                Value: "",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_PARENT_DGD_K8S_NAMESPACE",
                                                Value: "default",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "POD_NAME",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                            {
                                                Name: "POD_NAMESPACE",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                            {
                                                Name: "POD_UID",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                        ],
                                        Resources: {
                                            Limits: {
                                                "nvidia.com/gpu": {i: ..., d: ..., s: ..., Format: ...},
                                            },
                                            Requests: nil,
                                            Claims: nil,
                                        },
                                        ResizePolicy: nil,
                                        RestartPolicy: nil,
                                        VolumeMounts: [
                                            {
                                                Name: "shared-memory",
                                                ReadOnly: false,
                                                RecursiveReadOnly: nil,
                                                MountPath: "/dev/shm",
                                                SubPath: "",
                                                MountPropagation: nil,
                                                SubPathExpr: "",
                                            },
                                        ],
                                        VolumeDevices: nil,
                                        LivenessProbe: nil,
                                        ReadinessProbe: nil,
                                        StartupProbe: nil,
                                        Lifecycle: nil,
                                        TerminationMessagePath: "",
                                        TerminationMessagePolicy: "",
                                        ImagePullPolicy: "",
                                        SecurityContext: nil,
                                        Stdin: false,
                                        StdinOnce: false,
                                        TTY: false,
                                    },
                                ],
                                EphemeralContainers: nil,
                                RestartPolicy: "Always",
                                TerminationGracePeriodSeconds: 60,
                                ActiveDeadlineSeconds: nil,
                                DNSPolicy: "",
                                NodeSelector: nil,
                                ServiceAccountName: "default-test-sa",
                                DeprecatedServiceAccount: "",
                                AutomountServiceAccountToken: nil,
                                NodeName: "",
                                HostNetwork: false,
                                HostPID: false,
                                HostIPC: false,
                                ShareProcessNamespace: nil,
                                SecurityContext: {
                                    SELinuxOptions: nil,
                                    WindowsOptions: nil,
                                    RunAsUser: nil,
                                    RunAsGroup: nil,
                                    RunAsNonRoot: nil,
                                    SupplementalGroups: nil,
                                    SupplementalGroupsPolicy: nil,
                                    FSGroup: 1000,
                                    Sysctls: nil,
                                    FSGroupChangePolicy: nil,
                                    SeccompProfile: nil,
                                    AppArmorProfile: nil,
                                    SELinuxChangePolicy: nil,
                                },
                                ImagePullSecrets: nil,
                                Hostname: "",
                                Subdomain: "",
                                Affinity: nil,
                                SchedulerName: "volcano",
                                Tolerations: nil,
                                HostAliases: nil,
                                PriorityClassName: "",
                                Priority: nil,
                                DNSConfig: nil,
                                ReadinessGates: nil,
                                RuntimeClassName: nil,
                                EnableServiceLinks: nil,
                                PreemptionPolicy: nil,
                                Overhead: nil,
                                TopologySpreadConstraints: nil,
                                SetHostnameAsFQDN: nil,
                                OS: nil,
                                HostUsers: nil,
                                SchedulingGates: nil,
                                ResourceClaims: nil,
                                Resources: nil,
                            },
                        },
                        WorkerTemplate: {
                            ObjectMeta: {
                                Name: "",
                                GenerateName: "",
                                Namespace: "",
                                SelfLink: "",
                                UID: "",
                                ResourceVersion: "",
                                Generation: 0,
                                CreationTimestamp: {
                                    Time: 0001-01-01T00:00:00Z,
                                },
                                DeletionTimestamp: nil,
                                DeletionGracePeriodSeconds: nil,
                                Labels: {
                                    "instance-id": "0",
                                    "nvidia.com/metrics-enabled": "true",
                                    "role": "worker",
                                    "nvidia.com/dynamo-graph-deployment-name": "",
                                },
                                Annotations: {
                                    "scheduling.k8s.io/group-name": "test-lws-nil-id",
                                },
                                OwnerReferences: nil,
                                Finalizers: nil,
                                ManagedFields: nil,
                            },
                            Spec: {
                                Volumes: [
                                    {
                                        Name: "shared-memory",
                                        VolumeSource: {
                                            HostPath: nil,
                                            EmptyDir: {
                                                Medium: "Memory",
                                                SizeLimit: {i: ..., d: ..., s: ..., Format: ...},
                                            },
                                            GCEPersistentDisk: nil,
                                            AWSElasticBlockStore: nil,
                                            GitRepo: nil,
                                            Secret: nil,
                                            NFS: nil,
                                            ISCSI: nil,
                                            Glusterfs: nil,
                                            PersistentVolumeClaim: nil,
                                            RBD: nil,
                                            FlexVolume: nil,
                                            Cinder: nil,
                                            CephFS: nil,
                                            Flocker: nil,
                                            DownwardAPI: nil,
                                            FC: nil,
                                            AzureFile: nil,
                                            ConfigMap: nil,
                                            VsphereVolume: nil,
                                            Quobyte: nil,
                                            AzureDisk: nil,
                                            PhotonPersistentDisk: nil,
                                            Projected: nil,
                                            PortworxVolume: nil,
                                            ScaleIO: nil,
                                            StorageOS: nil,
                                            CSI: nil,
                                            Ephemeral: nil,
                                            Image: nil,
                                        },
                                    },
                                ],
                                InitContainers: nil,
                                Containers: [
                                    {
                                        Name: "main",
                                        Image: "test-image:latest",
                                        Command: ["/bin/sh", "-c"],
                                        Args: [
                                            "ray start --address=$LWS_LEADER_ADDRESS:6379 --block",
                                        ],
                                        WorkingDir: "",
                                        Ports: nil,
                                        EnvFrom: nil,
                                        Env: [
                                            {
                                                Name: "DYN_COMPONENT",
                                                Value: "",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_DISCOVERY_BACKEND",
                                                Value: "kubernetes",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_NAMESPACE",
                                                Value: "default-",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_PARENT_DGD_K8S_NAME",
                                                Value: "",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "DYN_PARENT_DGD_K8S_NAMESPACE",
                                                Value: "default",
                                                ValueFrom: nil,
                                            },
                                            {
                                                Name: "POD_NAME",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                            {
                                                Name: "POD_NAMESPACE",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                            {
                                                Name: "POD_UID",
                                                Value: "",
                                                ValueFrom: {
                                                    FieldRef: ...,
                                                    ResourceFieldRef: ...,
                                                    ConfigMapKeyRef: ...,
                                                    SecretKeyRef: ...,
                                                },
                                            },
                                        ],
                                        Resources: {
                                            Limits: {
                                                "nvidia.com/gpu": {i: ..., d: ..., s: ..., Format: ...},
                                            },
                                            Requests: nil,
                                            Claims: nil,
                                        },
                                        ResizePolicy: nil,
                                        RestartPolicy: nil,
                                        VolumeMounts: [
                                            {
                                                Name: "shared-memory",
                                                ReadOnly: false,
                                                RecursiveReadOnly: nil,
                                                MountPath: "/dev/shm",
                                                SubPath: "",
                                                MountPropagation: nil,
                                                SubPathExpr: "",
                                            },
                                        ],
                                        VolumeDevices: nil,
                                        LivenessProbe: nil,
                                        ReadinessProbe: nil,
                                        StartupProbe: nil,
                                        Lifecycle: nil,
                                        TerminationMessagePath: "",
                                        TerminationMessagePolicy: "",
                                        ImagePullPolicy: "",
                                        SecurityContext: nil,
                                        Stdin: false,
                                        StdinOnce: false,
                                        TTY: false,
                                    },
                                ],
                                EphemeralContainers: nil,
                                RestartPolicy: "Always",
                                TerminationGracePeriodSeconds: 60,
                                ActiveDeadlineSeconds: nil,
                                DNSPolicy: "",
                                NodeSelector: nil,
                                ServiceAccountName: "default-test-sa",
                                DeprecatedServiceAccount: "",
                                AutomountServiceAccountToken: nil,
                                NodeName: "",
                                HostNetwork: false,
                                HostPID: false,
                                HostIPC: false,
                                ShareProcessNamespace: nil,
                                SecurityContext: {
                                    SELinuxOptions: nil,
                                    WindowsOptions: nil,
                                    RunAsUser: nil,
                                    RunAsGroup: nil,
                                    RunAsNonRoot: nil,
                                    SupplementalGroups: nil,
                                    SupplementalGroupsPolicy: nil,
                                    FSGroup: 1000,
                                    Sysctls: nil,
                                    FSGroupChangePolicy: nil,
                                    SeccompProfile: nil,
                                    AppArmorProfile: nil,
                                    SELinuxChangePolicy: nil,
                                },
                                ImagePullSecrets: nil,
                                Hostname: "",
                                Subdomain: "",
                                Affinity: nil,
                                SchedulerName: "volcano",
                                Tolerations: nil,
                                HostAliases: nil,
                                PriorityClassName: "",
                                Priority: nil,
                                DNSConfig: nil,
                                ReadinessGates: nil,
                                RuntimeClassName: nil,
                                EnableServiceLinks: nil,
                                PreemptionPolicy: nil,
                                Overhead: nil,
                                TopologySpreadConstraints: nil,
                                SetHostnameAsFQDN: nil,
                                OS: nil,
                                HostUsers: nil,
                                SchedulingGates: nil,
                                ResourceClaims: nil,
                                Resources: nil,
                            },
                        },
                        Size: 2,
                        RestartPolicy: "",
                        SubGroupPolicy: nil,
                    },
                    RolloutStrategy: {
                        Type: "",
                        RollingUpdateConfiguration: nil,
                    },
                    StartupPolicy: "LeaderCreated",
                    NetworkConfig: nil,
                },
                Status: {Conditions: nil, ReadyReplicas: 0, UpdatedReplicas: 0, Replicas: 0, HPAPodSelector: ""},
            }
--- FAIL: TestDynamoComponentDeploymentReconciler_generateLeaderWorkerSet (0.00s)
    --- FAIL: TestDynamoComponentDeploymentReconciler_generateLeaderWorkerSet/nil_instanceID_-_success_(native_scaling) (0.00s)
FAIL
FAIL	github.com/ai-dynamo/dynamo/deploy/operator/internal/controller	0.565s
FAIL
