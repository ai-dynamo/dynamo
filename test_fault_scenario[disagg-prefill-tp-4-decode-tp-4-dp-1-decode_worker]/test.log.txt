[TEST] 2025-09-14T23:13:27 INFO ManagedDeployment: Restarting dynamo-platform-etcd app.kubernetes.io/component=etcd
[TEST] 2025-09-14T23:14:03 INFO ManagedDeployment: Restarted dynamo-platform-etcd app.kubernetes.io/component=etcd
[TEST] 2025-09-14T23:14:03 INFO ManagedDeployment: Restarting dynamo-platform-nats app.kubernetes.io/component=nats
[TEST] 2025-09-14T23:14:57 INFO ManagedDeployment: Restarted dynamo-platform-nats app.kubernetes.io/component=nats
[TEST] 2025-09-14T23:14:57 INFO ManagedDeployment: Starting Deployment fault-tolerance-test with spec <tests.utils.managed_deployment.DeploymentSpec object at 0x7fd291962900>
[TEST] 2025-09-14T23:14:57 INFO ManagedDeployment: {'apiVersion': 'nvidia.com/v1alpha1', 'kind': 'DynamoGraphDeployment', 'metadata': {'name': 'fault-tolerance-test', 'annotations': {'nvidia.com/enable-grove': 'false'}, 'namespace': 'nnshah1-test'}, 'spec': {'services': {'Frontend': {'dynamoNamespace': 'vllm-disagg', 'componentType': 'frontend', 'replicas': 1, 'extraPodSpec': {'mainContainer': {'image': 'nvcr.io/nvidian/swdl/dynamo:nnshah1-vllm-latest-5'}}}, 'VllmDecodeWorker': {'dynamoNamespace': 'vllm-disagg', 'envFromSecret': 'hf-token-secret', 'componentType': 'worker', 'replicas': 1, 'resources': {'limits': {'gpu': '4'}}, 'extraPodSpec': {'mainContainer': {'image': 'nvcr.io/nvidian/swdl/dynamo:nnshah1-vllm-latest-5', 'workingDir': '/workspace/components/backends/vllm', 'command': ['/bin/sh', '-c'], 'args': ['python3 -m dynamo.vllm --model Qwen/Qwen3-0.6B --tensor-parallel-size 4']}}}, 'VllmPrefillWorker': {'dynamoNamespace': 'vllm-disagg', 'envFromSecret': 'hf-token-secret', 'componentType': 'worker', 'replicas': 1, 'resources': {'limits': {'gpu': '4'}}, 'extraPodSpec': {'mainContainer': {'image': 'nvcr.io/nvidian/swdl/dynamo:nnshah1-vllm-latest-5', 'workingDir': '/workspace/components/backends/vllm', 'command': ['/bin/sh', '-c'], 'args': ['python3 -m dynamo.vllm --model Qwen/Qwen3-0.6B --is-prefill-worker --tensor-parallel-size 4']}}}}, 'envs': [{'name': 'DYN_LOGGING_JSONL', 'value': 'true'}, {'name': 'DYN_LOG', 'value': 'info'}]}}
[TEST] 2025-09-14T23:14:57 INFO ManagedDeployment: Deployment Started fault-tolerance-test
[TEST] 2025-09-14T23:14:57 INFO ManagedDeployment: Waiting for Deployment fault-tolerance-test
[TEST] 2025-09-14T23:16:01 INFO ManagedDeployment: Current deployment state: pending
[TEST] 2025-09-14T23:16:01 INFO ManagedDeployment: Current conditions: [{'lastTransitionTime': '2025-09-14T23:14:58Z', 'message': 'Resources not ready: fault-tolerance-test-vllmdecodeworker: Component deployment not ready - Available condition not true; fault-tolerance-test-vllmprefillworker: Component deployment not ready - Available condition not true; fault-tolerance-test-frontend: Component deployment not ready - Available condition not true', 'reason': 'some_resources_are_not_ready', 'status': 'False', 'type': 'Ready'}]
[TEST] 2025-09-14T23:16:01 INFO ManagedDeployment: Elapsed time: 63.8s / 1800s
[TEST] 2025-09-14T23:16:01 INFO ManagedDeployment: Deployment not ready yet - Ready condition: False, State successful: False
[TEST] 2025-09-14T23:17:05 INFO ManagedDeployment: Current deployment state: pending
[TEST] 2025-09-14T23:17:05 INFO ManagedDeployment: Current conditions: [{'lastTransitionTime': '2025-09-14T23:14:58Z', 'message': 'Resources not ready: fault-tolerance-test-vllmdecodeworker: Component deployment not ready - Available condition not true; fault-tolerance-test-vllmprefillworker: Component deployment not ready - Available condition not true; fault-tolerance-test-frontend: Component deployment not ready - Available condition not true', 'reason': 'some_resources_are_not_ready', 'status': 'False', 'type': 'Ready'}]
[TEST] 2025-09-14T23:17:05 INFO ManagedDeployment: Elapsed time: 127.7s / 1800s
[TEST] 2025-09-14T23:17:05 INFO ManagedDeployment: Deployment not ready yet - Ready condition: False, State successful: False
[TEST] 2025-09-14T23:18:10 INFO ManagedDeployment: Current deployment state: pending
[TEST] 2025-09-14T23:18:10 INFO ManagedDeployment: Current conditions: [{'lastTransitionTime': '2025-09-14T23:18:06Z', 'message': 'Resources not ready: fault-tolerance-test-frontend: Component deployment not ready - Available condition not true', 'reason': 'some_resources_are_not_ready', 'status': 'False', 'type': 'Ready'}]
[TEST] 2025-09-14T23:18:10 INFO ManagedDeployment: Elapsed time: 192.6s / 1800s
[TEST] 2025-09-14T23:18:10 INFO ManagedDeployment: Deployment not ready yet - Ready condition: False, State successful: False
[TEST] 2025-09-14T23:18:23 INFO ManagedDeployment: Current deployment state: successful
[TEST] 2025-09-14T23:18:23 INFO ManagedDeployment: Current conditions: [{'lastTransitionTime': '2025-09-14T23:18:22Z', 'message': 'All resources are ready', 'reason': 'all_resources_are_ready', 'status': 'True', 'type': 'Ready'}]
[TEST] 2025-09-14T23:18:23 INFO ManagedDeployment: Elapsed time: 205.3s / 1800s
[TEST] 2025-09-14T23:18:23 INFO ManagedDeployment: Deployment fault-tolerance-test is ready
[TEST] 2025-09-14T23:18:53 INFO test_fault_scenario[disagg-prefill-tp-4-decode-tp-4-dp-1-decode_worker]: Injecting failure for: Failure(time=30, pod_name='VllmDecodeWorker', command='dynamo.vllm', signal='SIGKILL', replicas=1)
[TEST] 2025-09-14T23:18:53 INFO test_fault_scenario[disagg-prefill-tp-4-decode-tp-4-dp-1-decode_worker]: Terminating VllmDecodeWorker Pid 1 Command /bin/sh -c python3 -m dynamo.vllm --model Qwen/Qwen3-0.6B --tensor-parallel-size 4
[TEST] 2025-09-14T23:18:54 INFO test_fault_scenario[disagg-prefill-tp-4-decode-tp-4-dp-1-decode_worker]: Terminating VllmDecodeWorker Pid 7 Command python3 -m dynamo.vllm --model Qwen/Qwen3-0.6B --tensor-parallel-size 4
