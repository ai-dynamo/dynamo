# SPDX-FileCopyrightText: Copyright (c) 2024-2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

[package]
name = "dynamo-kvbm-kernels"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true
build = "build.rs"

[lib]
name = "dynamo_kvbm_kernels"
crate-type = ["rlib", "cdylib"]

[features]
default = []
# Enable CUDA tests - only works when real CUDA kernels are built (not stubs)
# Tests are gated with #[cfg(all(test, feature = "testing-cuda", not(stub_kernels)))]
testing-cuda = []
# Use prebuilt kernels from cuda/prebuilt/ instead of building from source
prebuilt-kernels = []
# Generate prebuilt artifacts (fatbin, .so) and copy to cuda/prebuilt/ directory.
# This is used for creating redistributable prebuilt artifacts.
# Off by default since the .so is sufficient for normal operation.
generate-prebuilt = []

[dependencies]
cudarc = { workspace = true }
once_cell = "1.19"

[build-dependencies]
dynamo-config = { workspace = true }
cc = "1.0"
md5 = "0.8.0"
