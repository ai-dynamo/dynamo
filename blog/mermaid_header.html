<script type="module">
  // Fix pandoc's <pre class="mermaid"><code>...</code></pre> structure:
  // Mermaid expects raw text directly inside <pre class="mermaid">, no <code> wrapper.
  document.querySelectorAll('pre.mermaid').forEach(pre => {
    const code = pre.querySelector('code');
    if (code) {
      pre.textContent = code.textContent;
    }
  });

  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true, theme: 'default' });
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.min.css">
<style>
  body { max-width: 900px; }
  pre.mermaid { border: none; background: none; text-align: center; }
  h1 { border-bottom: 2px solid #e94560; padding-bottom: 0.3em; }
</style>
